!function(){"use strict";var e=angular.module("tirats",["ngRoute","ngCookies","toastr"]);e.config(function(e){e.when("/",{templateUrl:"landing/landing.html"}).when("/:operationId",{controller:"operationController as operationCtrl",templateUrl:"operation/operation.html"}).otherwise({redirectTo:"/"})}),e.config(function(e){angular.extend(e,{positionClass:"toast-top-full-width",maxOpened:1,target:".app-form",timeOut:1500})})}(),angular.module("tirats").run(["$templateCache",function(e){e.put("landing/landing.html",'<ul style="margin-top:3em">\n    <li><a href="#/Addition?digit=1&max=9&min=0&level=A1">Addition - 1 digit</a></li>\n    <li><a href="#/Addition?digit=2&max=99&min=10&level=A2">Addition - 2 digit</a></li>\n    <li><a href="#/Addition?digit=3&max=999&min=100&level=A3">Addition - 3 digit</a></li>\n    <li><a href="#/Addition?digit=4&max=9999&min=1000&level=A4">Addition - 4 digit</a></li>\n    <li><a href="#/Subtraction?digit=1&max=9&min=0&level=S1">Subtraction - 1 digit</a></li>\n    <li><a href="#/Subtraction?digit=2&max=99&min=10&level=S2">Subtraction - 2 digit</a></li>\n    <li><a href="#/Subtraction?digit=3&max=999&min=100&level=S3">Subtraction - 3 digit</a></li>\n    <li><a href="#/Subtraction?digit=4&max=9999&min=1000&level=S4">Subtraction - 4 digit</a></li>\n    <li><a href="#/Multiplication?max=9&digit=1&level=M1">Multiplication - Number to 9 by 1 digit</a></li>\n    <li><a href="#/Multiplication?max=100&digit=1&level=M2">Multiplication - Numbers to 99 by 1 digit</a></li>\n    <li><a href="#/Multiplication?max=1000&digit=1&level=M3">Multiplication - Numbers to 999 by 1 digit</a></li>\n    <li><a href="#/Multiplication?max=10000&digit=1&level=M4">Multiplication - Numbers to 9999 by 1 digit</a></li>\n    <li><a href="#/Multiplication?max=100&digit=2&level=M5">Multiplication - Numbers to 99 by 2 digit</a></li>\n    <li><a href="#/Multiplication?max=1000&digit=2&level=M6">Multiplication - Numbers to 999 by 2 digit</a></li>\n    <li><a href="#/Multiplication?max=10000&digit=2&level=M7">Multiplication - Numbers to 9999 by 2 digit</a></li>\n</ul>'),e.put("operation/operation.html",'<div class="app-lesson-jumbotron">\n    <div class="app-jumbotron-content">\n        <div class="app-user-name"><a href="#/">{{::operationCtrl.page.userName}}</a></div>\n        <div class="app-lesson-title">{{::operationCtrl.page.title}}</div>\n    </div>\n</div>\n<div class="row">\n    <div class="app-score">\n        <span title="{{operationCtrl.page.title + \' - \' + operationCtrl.page.description}}">{{::operationCtrl.page.level}}</span>\n        {{::operationCtrl.scoreLabel}}: {{operationCtrl.userScore}}\n        <div>\n            <span>{{operationCtrl.page.timer.hours}}:</span><span>{{operationCtrl.page.timer.minutes}}:</span><span>{{operationCtrl.page.timer.seconds}}</span>\n        </div>\n    </div>\n</div>\n<div class="row app-addition">\n    <div class="col-sm-6 app-operation">\n        <form class="app-form" name="calcForm" novalidate ng-submit="operationCtrl.checkAnswer()">\n            <div class="app-operand" ng-repeat="number in operationCtrl.operands">\n                <div ng-if="$index===operationCtrl.numberOfOperands -1">{{operationCtrl.page.operationSymbol}} {{number.value}}</div>\n                <div ng-if="$index!==operationCtrl.numberOfOperands -1">{{number.value}}</div>\n            </div>\n            <div class="app-answer-separator">________________</div>\n            <input type="text" class="app-input {{digit.position}}" size="1" maxlength="1" ng-model="digit.inputValue" required\n               ng-repeat="digit in operationCtrl.answer | orderBy:digit.position"\n               ng-change="operationCtrl.setElementFocusAfterInput(digit.position)"\n               ng-keyup="operationCtrl.notIdle()" ng-pattern="/[0-9]/"/>\n            <input ng-disabled="calcForm.$invalid" type="submit" class="btn btn-primary app-submit">\n        </form>\n    </div>\n    <div class="col-sm-6">\n    </div>\n</div>\n<div ng-init="operationCtrl.setElementFocus(operationCtrl.answer.length-1)"></div>\n')}]),function(){"use strict";angular.module("tirats").factory("mathServices",[function(){var e,i,t,n=[],a=function(n){"Multiplication"!==n.operation?(n.title=n.digit+"-Digit "+n.operation,n.description="Numbers between "+n.min+" and "+n.max,e=Number(n.max),i=Number(n.min)):(n.title=n.operation+" by "+n.digit+" digits",n.description="Numbers to "+n.max,e=Number(n.max),"1"===n.digit?(t=9,i=0):"2"===n.digit?(t=99,i=10):"3"===n.digit?(t=999,i=100):(t=9999,i=1e3))},r=function(e,i){return Math.floor(Math.random()*(i-e+1)+e)},o=function(o){var l,p,u=2;if(n.length=0,a(o),"Addition"===o.operation)for(o.operationSymbol="+",u=r(2,3),l=0;l<u;l++)p={value:r(i,e)},n.push(p);else if("Subtraction"===o.operation)for(o.operationSymbol="-",l=0;l<u;l++)p=l?{value:r(i,n[0].value)}:{value:r(i,e)},n.push(p);else if("Multiplication"===o.operation)for(o.operationSymbol="X",l=0;l<u;l++)p=l?{value:r(i,t)}:{value:r(t,e)},n.push(p);return n},l=function(e){return e.userName="Tirat",e.userName};return{operands:n,getOperands:o,getUserName:l}}])}(),function(){"use strict";angular.module("tirats").controller("operationController",["mathServices","toastr","$cookies","$location","$routeParams","$scope",function(e,i,t,n,a,r){var o=this,l=!0;o.scoreLabel="Score";var p=function(){t.put(o.page.id+"Score",o.userScore),t.put(o.page.id+"Correct",o.currentCorrect),t.put(o.page.id+"Wrong",o.currentWrong),t.put(o.page.id+"Time",o.page.timer.value)},u=function(){o.userScore=t.get(o.page.id+"Score")||0,o.currentCorrect=t.get(o.page.id+"Correct")||0,o.currentWrong=t.get(o.page.id+"Wrong")||0};o.checkAnswer=function(){var e=!0;angular.forEach(o.answer,function(i){i.inputValue!==i.correctValue&&(e=!1)}),e?(i.success("You got it",o.answer),o.userScore++,o.currentCorrect++,c()):(i.error("Not quite"),l===!0&&o.userScore&&(o.userScore--,o.currentWrong++)),l=e,o.setElementFocus(o.answer.length-1),p()};var s=function(e){for(var i=e[0].value,t=1;t<o.numberOfOperands;t++)"Addition"===o.page.operation?i+=o.operands[t].value:"Subtraction"===o.page.operation?i-=o.operands[t].value:"Multiplication"===o.page.operation&&(i*=o.operands[t].value);return i.toString()},d=function(){o.operands=e.operands,o.numberOfOperands=o.operands.length;var i,t=s(o.operands).split(""),n=t.length,a=0;for(o.answer=[],"Subtraction"===o.page.operation&&(a=o.operands[0].value.toString().length-n),i=0;i<a;i++)o.answer.push({position:i,correctValue:"0",inputValue:""});for(i=0;i<n;i++){var r={position:a+i,correctValue:t[i],inputValue:""};o.answer.push(r)}};o.setElementFocus=function(e){window.setTimeout(function(){angular.element(".app-input."+e).focus(),angular.element(".app-input."+e).select()},100)},o.setElementFocusAfterInput=function(e){o.answer[e].inputValue&&o.setElementFocus(e-1)};var c=function(){e.getOperands(o.page),d()},g=function(){o.page.timer={isOn:!1,idleMark:90},o.page.timer.value=t.get(o.page.id+"Time")||0,v()},m=function(){o.page.timer.isOn=!0,o.page.timer.idle=0;var e=window.setInterval(function(){o.page.timer.value++,o.page.timer.idle++,o.page.timer.idle>=o.page.timer.idleMark&&(window.clearInterval(e),o.page.timer.value-=o.page.timer.idleMark,o.page.timer.isOn=!1,o.page.timer.idle=0),v()},1e3)},v=function(){o.page.timer.hours=f(Math.floor(o.page.timer.value/3600)),o.page.timer.minutes=f(Math.floor(o.page.timer.value/60)),o.page.timer.seconds=f(Math.floor(o.page.timer.value%60)),r.$$phase||r.$digest()},f=function(e){return e<10&&(e="0"+e),e};o.notIdle=function(){o.page.timer.idle=0,o.page.timer.isOn||m()},function(){o.page=n.search(),o.page.operation=a.operationId,o.page.id=e.getUserName(o.page)+o.page.operation+o.page.level,g(),u(),c()}()}])}();